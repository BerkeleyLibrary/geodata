require 'rails_helper'

RSpec.describe "OmniauthCallbacks", type: :request do
  
  # describe "#Calnet" do
  #   let(:user) {  FactoryBot.create(:user) }
  #   let(:auth_params) { { "uid" => "123", "provider" => "calnet" } }
    
  #   before do
  #     request.env["omniauth.auth"] = auth_params
  #   end
    
  #   context "when sign in is successful" do
  #     before do
  #       allow(User).to receive(:from_calnet).with(auth_params).and_return(user)
  #       allow(controller).to receive(:sign_in).with(user)
        
  #     end
      
  #     it "redirects to the root path" do
  #       # expect(controller.current_user).to eq(user)
  #       expect(response).to redirect_to(root_path)
  #     end
      
     
  #   end
        
  # end
end
